CMD_DIR = ./cmd

test:
	go test -coverprofile coverprofile.out -v ./... && go tool cover -html=coverprofile.out -o=coverprofile.html

wire:
	wire gen di/*.go
	@for f in $(shell ls ${CMD_DIR}); do cp di/wire_gen.go di/inject* ${CMD_DIR}/$${f}; done
	rm di/wire_gen.go
	sed -i '1s/^/\/\/ Code generated by Box. DO NOT EDIT.\n\n/' cmd//inject.go

gen-mocks:
	./gen-mocks.sh